<section class="p-6 space-y-6">
  <!-- Header -->
  <header class="flex items-center justify-between">
    <div>
      <h1 class="text-2xl font-semibold text-gray-900 dark:text-gray-100">
        Centrales de Generación
      </h1>
      <p class="text-sm text-gray-500 dark:text-gray-400">
        Total: {{ total() }}
      </p>
    </div>

    <button
      type="button"
      class="inline-flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50"
      (click)="reload()"
      [disabled]="loading()"
    >
      @if (loading()) {
        <span class="animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"></span>
        Cargando...
      } @else {
        Recargar
      }
    </button>
  </header>

  <!-- Loading -->
  @if (loading()) {
    <div class="flex justify-center py-10">
      <div class="h-8 w-8 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"></div>
    </div>
  } @else {

    <!-- Empty state -->
    @if (centrales().length === 0) {
      <div class="rounded-lg border border-dashed border-gray-300 dark:border-gray-700 p-10 text-center">
        <p class="text-gray-500 dark:text-gray-400">
          No hay centrales registradas
        </p>
      </div>
    } @else {

      <!-- Table -->
      <div class="overflow-x-auto rounded-lg border border-gray-200 dark:border-gray-700">
        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
          <thead class="bg-gray-50 dark:bg-gray-800">
            <tr>
              <th class="px-4 py-3 text-left text-xs font-medium uppercase text-gray-500">
                ID
              </th>
              <th class="px-4 py-3 text-left text-xs font-medium uppercase text-gray-500">
                Nombre
              </th>
              <th class="px-4 py-3 text-left text-xs font-medium uppercase text-gray-500">
                Estado
              </th>
              <th class="px-4 py-3 text-left text-xs font-medium uppercase text-gray-500">
                Tipo
              </th>
              <th class="px-4 py-3 text-left text-xs font-medium uppercase text-gray-500">
                Ubicación
              </th>
              <th class="px-4 py-3 text-right text-xs font-medium uppercase text-gray-500">
                Acciones
              </th>
            </tr>
          </thead>

          <tbody class="divide-y divide-gray-100 dark:divide-gray-800">
            @for (central of centrales(); track central.centralId) {
              <tr class="hover:bg-gray-50 dark:hover:bg-gray-800">
                <td class="px-4 py-3 text-sm text-gray-700 dark:text-gray-300">
                  {{ central.centralId }}
                </td>

                <td class="px-4 py-3 text-sm font-medium text-gray-900 dark:text-gray-100">
                  {{ central.nombre }}
                </td>

                <td class="px-4 py-3 text-sm">
                  <span
                    class="inline-flex rounded-full px-2 py-1 text-xs font-medium"
                    [ngClass]="{
                      'bg-green-100 text-green-800': central.estadoOperacion === 'Operativa',
                      'bg-yellow-100 text-yellow-800': central.estadoOperacion !== 'Operativa'
                    }"
                  >
                    {{ central.estadoOperacion }}
                  </span>
                </td>

                <td class="px-4 py-3 text-sm text-gray-700 dark:text-gray-300">
                  {{ central.tipoCentral }}
                </td>

                <td class="px-4 py-3 text-sm text-gray-700 dark:text-gray-300">
                  {{ central.ubicacionEstado }}
                </td>

                <td class="px-4 py-3 text-right">
                  <button
                    class="text-sm font-medium text-blue-600 hover:underline"
                  >
                    Ver detalle
                  </button>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    }
  }
</section>
