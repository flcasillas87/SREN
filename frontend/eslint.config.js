import eslint from '@eslint/js';
import tseslint from 'typescript-eslint';
import angular from 'angular-eslint';
import eslintConfigPrettier from 'eslint-config-prettier';
import simpleImportSort from 'eslint-plugin-simple-import-sort';
import unusedImports from 'eslint-plugin-unused-imports';
import importPlugin from 'eslint-plugin-import';

export default tseslint.config(
  {
    ignores: ['.angular/**', '.nx/**', 'coverage/**', 'dist/**'],
    files: ['**/*.ts'],
    extends: [
      eslint.configs.recommended,       // Reglas recomendadas ESLint
      ...tseslint.configs.recommended,  // Reglas recomendadas TS
      ...tseslint.configs.stylistic,    // Estilo de cÃ³digo TS
      ...angular.configs.tsRecommended, // Reglas recomendadas Angular TS
      eslintConfigPrettier,             // Compatibilidad con Prettier
    ],
    processor: angular.processInlineTemplates,
    plugins: {
      'simple-import-sort': simpleImportSort, // Orden de imports
      'unused-imports': unusedImports,        // Detecta imports no usados
      'import': importPlugin,                  // Reglas adicionales de imports
    },
    rules: {
      // ðŸ”¹ Tipado estricto
      //'@typescript-eslint/no-explicit-any': 'error', 

      // ðŸ”¹ Nombres y accesibilidad
      '@typescript-eslint/naming-convention': [
        'error',
        {
          selector: 'property',
          modifiers: ['private'],
          format: ['camelCase'],
          leadingUnderscore: 'require', // Privadas con _
        },
        {
          selector: 'memberLike',
          modifiers: ['public'],
          format: ['camelCase'], // PÃºblicas camelCase
        },
      ],
      '@typescript-eslint/explicit-member-accessibility': [
        'error',
        { accessibility: 'explicit' }, // Todos los miembros deben declarar public/private
      ],

      // ðŸ”¹ Orden de miembros
      '@typescript-eslint/member-ordering': [
        'error',
        {
          default: [
            'private-field',
            'public-field',
            'constructor',
            'private-method',
            'public-method',
          ],
        },
      ],

      // ðŸ”¹ Angular OnPush
      '@angular-eslint/prefer-on-push-component-change-detection': 'error',

      // ðŸ”¹ Orden de imports
      'simple-import-sort/imports': 'error',
      'simple-import-sort/exports': 'error',

      // ðŸ”¹ Import plugin
      'import/no-duplicates': 'error',       // Evita duplicados
      'import/newline-after-import': 'error',// LÃ­nea en blanco tras imports

      // ðŸ”¹ Unused imports
      'unused-imports/no-unused-imports': 'error', 
    },
  },
  {
    files: ['**/*.html'],
    extends: [
      ...angular.configs.templateRecommended,     // Reglas Angular templates
      ...angular.configs.templateAccessibility,  // Reglas de accesibilidad
    ],
    rules: {
      // AquÃ­ se pueden agregar reglas especÃ­ficas de templates
    },
  },
);
